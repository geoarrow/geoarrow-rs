
[package]
name = "geoarrow-flatgeobuf"
version = { workspace = true }
authors = { workspace = true }
edition = { workspace = true }
homepage = { workspace = true }
license = { workspace = true }
repository = { workspace = true }
description = "Rust implementation of GeoArrow"
categories = { workspace = true }
rust-version = { workspace = true }

[features]
default = ["async"]
async = [
  "flatgeobuf/http",
  "dep:async-trait",
  "dep:bytes",
  "dep:http-range-client",
  "dep:object_store",
]

[dependencies]
arrow-cast = { version = "53.3" }
arrow-csv = { version = "53", optional = true }
arrow-data = "53.3"
arrow-ipc = "53.3"
arrow-schema = "53.3"
async-trait = { version = "0.1", optional = true }
bytes = { version = "1.5.0", optional = true }
chrono = { version = "0.4" }
dbase = "0.5.0"
enum-as-inner = "0.6.1"
# Set default-features = false because async not working in wasm right now
# For geo-traits impl
flatgeobuf = { git = "https://github.com/flatgeobuf/flatgeobuf", rev = "f554f2768b612e131e9f55d014eaa5b911a7f1b5", default-features = false }
futures = { version = "0.3", optional = true }
gdal = { version = "0.17", optional = true }
geo = "0.29.3"
geoarrow = { path = "../geoarrow" }
geo-index = "0.1.1"
geo-traits = "0.2"
geos = { version = "9.0", features = ["v3_10_0", "geo"], optional = true }
geozero = { version = "0.14", features = ["with-wkb"] }
half = { version = "2.4.1" }
http-range-client = { version = "0.8", optional = true }
indexmap = { version = "2" }
lexical-core = { version = "0.8.5" }
object_store = { version = "0.11", optional = true }
parquet = { version = "53", optional = true, default-features = false, features = [
  "arrow",
] }
phf = { version = "0.11", features = ["macros"] }
polylabel = { version = "3.2.0", optional = true }
proj = { version = "0.27.2", optional = true, features = [
  "pkg_config",
  "geo-types",
] }
rayon = { version = "1.8.0", optional = true }
rstar = "0.12"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
shapefile = "0.6"
sqlx = { version = "0.7", optional = true, default-features = false, features = [
  "chrono",
  "json",
  "postgres",
  "runtime-tokio",
  "tls-rustls",
] }
thiserror = "1"
tokio = { version = "1", default-features = false, optional = true }
wkt = "0.12"
wkb = "0.8"


[dev-dependencies]
approx = "0.5.1"
bytes = "1.5.0"
criterion = { version = "0.5", features = ["html_reports"] }
gdal = { version = "0.17", features = ["bindgen"] }
geozero = { version = "0.14", features = ["with-wkb"] }
sqlx = { version = "0.7", default-features = false, features = ["postgres"] }
tokio = { version = "1.9", features = ["macros", "fs", "rt-multi-thread"] }
object_store = { version = "0.11", features = ["http", "aws"] }
parquet = { version = "53", default-features = false, features = [
  "arrow",
  "object_store",
] }


[lib]
doctest = true

[package.metadata.docs.rs]
rustdoc-args = ["--cfg", "docsrs"]
features = ["async"]
